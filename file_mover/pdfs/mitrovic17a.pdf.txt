Differentially Private Submodular Maximization:
Data Summarization in Disguise
Marko Mitrovic 1 Mark Bun 1 2 Andreas Krause 3 Amin Karbasi 1

Abstract
Many data summarization applications are captured by the general framework of submodular
maximization. As a consequence, a wide range
of efficient approximation algorithms have been
developed. However, when such applications involve sensitive data about individuals, their privacy concerns are not automatically addressed.
To remedy this problem, we propose a general and systematic study of differentially private
submodular maximization. We present privacypreserving algorithms for both monotone and
non-monotone submodular maximization under
cardinality, matroid, and p-extendible system
constraints, with guarantees that are competitive
with optimal solutions. Along the way, we analyze a new algorithm for non-monotone submodular maximization under a cardinality constraint,
which is the first (even non-privately) to achieve
a constant approximation ratio with a linear number of function evaluations. We additionally provide two concrete experiments to validate the efficacy of these algorithms.

1. Introduction
A set function f : 2V → R is said to be submodular if
for all sets S ⊆ T ⊆ V and every element v ∈ V we
have f (S ∪ {v}) − f (S) ≥ f (T ∪ {v}) − f (T ). That is,
the marginal contribution of any element v to the value of
the function f (S) diminishes as the input set S increases.
The theory of submodular maximization unifies and generalizes diverse problems in combinatorial optimization, including the Max-Cover, Max-Cut, and Facility Location
problems. In turn, this theory has recently found numerous
applications to problems in machine learning, data science,
and artificial intelligence. A few such applications include
exemplar-based clustering (Krause & Gomes, 2010), feature selection for classification (Krause & Guestrin, 2005),
document and corpus summarization (Lin & Bilmes, 2011;
1

Yale University, New Haven, CT, USA 2 Princeton University,
Princeton, NJ, USA 3 ETH Zurich, Zurich, Switzerland. Correspondence to: Marko Mitrovic <marko.mitrovic@yale.edu>.
Proceedings of the 34 th International Conference on Machine
Learning, Sydney, Australia, PMLR 70, 2017. Copyright 2017
by the author(s).

Kirchhoff & Bilmes, 2014; Sipos et al., 2012), crowd teaching (Singla et al., 2014), and influence maximization in social networks (Kempe et al., 2003).
Some of the most compelling use cases for these applications concern sensitive data about individuals (Mirzasoleiman et al., 2016a;b). As a running example, let us
consider the specific problem of determining which of a
collection of features (e.g. age, height, weight, etc.) are
most relevant to a binary classification task (e.g. predicting whether an individual is likely to have diabetes). In
this problem, a sensitive training set takes the form D =
{(xi , yi )}ni=1 where each individual i’s data consists of features xi,1 , . . . , xi,m together with a class label yi . The goal
is to identify a small subset S ⊆ [m] of features which can
then be used to build a good classifier for y. Many techniques exist for feature selection, including one based on
maximizing a submodular function which captures the mutual information between a subset of features and the class
label of interest (Krause & Guestrin, 2005). However, for
both legal (e.g. compliance with HIPAA regulations) and
ethical reasons, it is important that the selection of relevant
features does not compromise the privacy of any individual
who has contributed to the training data set. Unfortunately,
the theory of submodular maximization does not in itself
accommodate such privacy concerns.
To this end, we propose a systematic study of differentially
private submodular maximization to enable these applications based on submodular maximization, while provably
guaranteeing individual-level privacy. The notion of differential privacy (Dwork et al., 2006) offers a strong protection of individual-level privacy. Nevertheless, differential
privacy has been shown to permit useful data analysis and
machine learning tasks. In a nutshell, the definition formalizes a guarantee that no individual’s data should have too
significant an effect on the outcome of a computation. We
provide the formal definition in Section 2. Such a privacy
guarantee is obtained through the introduction of random
noise, so private submodular maximization is conceptually
related to the problem of submodular maximization in the
presence of noise (Cheraghchi, 2012; Hassidim & Singer,
2016).
In this work, we study the following problem under various
conditions on the submodular objective function f (monotone vs. non-monotone), and various choices of the con-

Differentially Private Submodular Maximization

straint C (cardinality, matroid, or p-extendible system).
Problem 1. Given a sensitive dataset D associated to
a submodular function fD : 2V → R: Find a subset
S ∈ C ⊂ 2V that approximately maximizes fD (S) in a
manner that guarantees differential privacy with respect to
the input dataset D.
An important special case of this problem was studied in prior work of Gupta et al. (2010). They considered the “combinatorial public projects” problem (Papadimitriou et al., 2008), where given a dataset D =
(x1 , . . . , xn ),Pthe function fD takes the particular form
n
fD (S) = n1 i=1 fxi (S) for monotone submodular functions fxi : 2V → [0, 1], and is to be maximized subject
to a cardinality constraint |S| ≤ k. We call functions of
this form decomposable. They presented a simple greedy
algorithm, which will be central to our work, together with
a tailored analysis which achieves strong accuracy guarantees in this special case.
However, there are many cases of Problem 1 which do not
fall into the combinatorial public projects framework. For
some problems, including feature selection via mutual information, the submodular function fD of interest depends
on the dataset D in ways much more complicated than averaging functions associated to each individual. The focus of
our work is on understanding Problem 1 in circumstances
which capture a broader class of useful applications and
constraints in machine learning. We summarize our specific contributions in Section 1.2.
1.1. The greedy paradigm
Even without concern for privacy, the problem of submodular maximization poses computational challenges. In particular, exact submodular maximization subject to a cardinality constraint is NP-hard. One of the principal approaches to designing efficient approximation algorithms
is to use a greedy strategy (Nemhauser et al., 1978). Consider the problem of maximizing a set function f (S) subject to the cardinality constraint |S| ≤ k. In each of rounds
i = 1, . . . , k, the basic greedy algorithm constructs Si
from Si−1 by adding the element vi ∈ (V \ Si−1 ) which
maximizes the marginal gain f (Si−1 ∪ {vi }) − f (Si−1 ).
Nemhauser et al. (1978) famously showed that this algorithm yields a (1−1/e)-approximation to the optimal value
of f (S) whenever f is a monotone submodular function.
In the combinatorial public projects setting, Gupta et al.
(2010) showed how to make the greedy algorithm compatible with differential privacy by randomizing the procedure
for selecting each vi . This selection procedure is specified
by the differentially private exponential mechanism of McSherry & Talwar (2007), which (probabilistically) guarantees that the vi selected in each round is almost as good as
the true marginal gain maximizer. Remarkably, Gupta et al.
(2010) show that the cumulative privacy guarantee of the

resulting randomized greedy algorithm is not much worse
than that of a single run of the exponential mechanism.
This analysis is highly tailored to the structure of the combinatorial public projects problem. However, replacing this
tailored analysis with the more generic “advanced composition theorem” for differential privacy (Dwork et al.,
2010), one still obtains useful results for the more general
class of “low-sensitivity” submodular functions.
1.2. Our contributions
Table 1 summarizes the approximation guarantees we obtain for Problem 1 under increasingly more general classes
of submodular functions fD (read top to bottom), and increasingly more general types of constraints (read left to
right). In each entry, OPT denotes the value of the optimal
non-private solution. Below we draw attention to a few particular contributions, including some that are not expressed
in Table 1.
Non-monotone objective functions. Submodular maximization for non-monotone functions is significantly more
challenging than it is for monotone objectives. In particular, the basic greedy algorithm of Nemahauser et al. fails,
and cannot guarantee any constant-factor approximation.
Several works (Feldman et al., 2017; Mirzasoleiman et al.,
2016a; Buchbinder et al., 2014; Feldman et al., 2011) have
identified variations of the greedy algorithm that do yield
constant-factor approximations for non-monotone objectives. However, it is not clear how to modify any of these
algorithms to accommodate differential privacy.
Our starting point is instead the “stochastic greedy” algorithm of Mirzasoleiman et al. (2015), which was originally designed to perform monotone submodular maximization in linear time. Drawing ideas from Buchbinder
et al. (2014), we give a new analysis of the stochastic
greedy algorithm to show that it also gives a 1e (1 − 1/e)approximation for non-monotone submodular functions.
To our knowledge, this is the first algorithm making exactly |V | function evaluations which achieves a constantfactor approximation for either monotone or non-monotone
objectives. Moreover, it is immediately clear how to use
the exponential mechanism to make this algorithm differentially private.
This phenomenon is analogous to how stochastic variants
of gradient descent are more naturally suited to providing differential privacy than their deterministic counterparts (Song et al., 2013; Bassily et al., 2014). That is, our
results illustrate how techniques for making algorithms fast
are also helpful in making them privacy-preserving.
General constraints. While a cardinality constraint is
perhaps the most natural to place on a submodular maximization problem, some machine learning problems, e.g.
personalized data summarization (Mirzasoleiman et al.,
2016a), require the use of more general types of con-

Differentially Private Submodular Maximization

Comb. Pub. Proj.
Monotone
Non-monotone

1−

1
e


Cardinality
OPT −O k logn |V | (Gupta et al., 2010)

 3/2

|V |
1 − 1e OPT −O k log
n

 3/2

k
log |V |
1
1
1
−
OPT
−O
e
e
n

Matroid


OPT −O k logn |V |
 3/2

|V |
OPT −O k log
n

1
2



1
2

–

p-Extendible


OPT −O k logn |V |
 3/2

|V |
OPT −O k log
n

1
p+1
1
p+1

–

Table 1. Guarantees of expected solution quality for privately maximizing a sensitivity-(1/n) submodular function fD . The parameter k
represents either a cardinality constraint, or the size of the set returned (for matroid or p-extendible system constraints). Full expressions
with explicit dependencies on differential privacy parameters ε, δ appear in the body of the paper.

straints. For instance, one may wish to maximize a submodular function f (S) subject to S ∈ I for an arbitrary
matroid I, or subject to S being contained in an intersection of p matroids (more generally, a p-extendible system). For these types of constraints, the greedy algorithm
still yields a constant factor approximation for monotone
objective functions (Fisher et al., 1978; Jenkyns, 1976;
Călinescu et al., 2011). We show in this work that the analysis provided by Călinescu et al. (2011) for matroids and
p-extendible families can be adapted to handle additional
error introduced for differential privacy.
General selection procedures. For worst-case datasets,
the exponential mechanism is optimal within each round
of private maximization. However, it may be sub-optimal
for datasets enjoying additional structural properties. Fortunately, the greedy framework we use is flexible with regard to the choice of the selection procedure. For instance,
one can replace the exponential mechanism in a black-box
manner with the “large margin mechanism” of Chaudhuri
et al. (2014) to obtain error bounds that replace the explicit dependence on log |V | in Table 1 with a term that
may be significantly smaller for real datasets. We give a
slightly simplified analysis of the large margin mechanism,
and present it in a manner suitable for greedy algorithms
which access the same data set multiple times. (These guarantees are more complicated, but spelled out in Section 5.)
For submodular functions exhibiting additional structure,
one may also be able to perform each maximization step
with the “choosing mechanism” of Beimel et al. (2016)
and Bun et al. (2015).

2. Preliminaries
Let V be finite set which we will refer to as the ground set
and let X be a finite set which we will refer to as the data
universe. A dataset is an n-tuple D = (x1 , . . . , xn ) ∈ X n .
Suppose each dataset D is associated to a set function fD :
2V → R. The manner in which fD depends on D will be
application-specific, but it is assumed that the association
between D and fD is public information.
Definition 2. A set function fD : 2V → R is submodular
if for all sets S ⊆ T ⊆ V and every element v ∈ V , we
have fD (S ∪ {v}) − fD (S) ≥ fD (T ∪ {v}) − fD (T ).
Moreover, If fD (S) ≤ fD (T ) whenever S ⊆ T , we say
fD is monotone. If for
Pnevery dataset D = (x1 , . . . , xn ),
the function fD = n1 i=1 fxi for monotone submodular

functions fxi : 2V → [0, λ], we say fD is λ-decomposable.
The problem of maximizing a decomposable submodular function was considered as the “combinatorial public
projects problem” by Papadimitriou et al. (2008).
We are interested in the problem of approximately maximizing a submodular function subject to differential privacy. The definition of differential privacy relies on the
notion of neighboring datasets, which are simply tuples
D, D0 ∈ X n that differ in at most one entry. If D, D0 are
neighboring, we write D ∼ D0 .
Definition 3. A randomized algorithm M : X n → R satisfies (ε, δ)-differential privacy if for all measurable sets
T ⊆ R and all neighboring datasets D ∼ D0 ,
Pr[M (D) ∈ T ] ≤ eε Pr[M (D0 ) ∈ T ] + δ.
Differentially private algorithms must be calibrated to the
sensitivity of the function of interest with respect to small
changes in the input dataset, defined formally as follows.
Definition 4. The sensitivity of a set function fD : 2V →
R (depending on a dataset D) with respect to a constraint
C ⊆ 2V is defined as
max0 max |fD (S) − fD0 (S)|.
D∼D S∈C

Composition of Differential Privacy. The analyses of
our algorithms rely crucially on composition theorems for
differential privacy. For a sequence of privacy parameters {(εi , δi )}ki=1 , we informally refer to the k-fold adaptive composition of (εi , δi )-differentially private algorithms
as the output of a mechanism M ∗ that behaves as follows on an input D: In each of rounds i = 1, . . . , k,
the algorithm M ∗ selects an (εi , δi )-differentially private
algorithm Mi possibly depending on the previous outcomes M1 (D), . . . , Mi (D) (but not directly on the sensitive dataset D itself), and releases Mi (D). For a formal
treatment of adaptive composition, see (Dwork et al., 2010;
Dwork & Roth, 2014).
Theorem 5. (Dwork & Lei, 2009; Dwork et al., 2010;
Bun & Steinke, 2016) The k-fold adaptive composition
of (ε0 , δ0 )-differentially private algorithms satisfies (ε, δ)differential privacy where
1. ε = kε0 and δ = kδ0 .
(Basic Composition).
p
2. ε = 21 kε20 + 2 log(1/δ 0 )ε0 and δ = δ 0 + kδ, for any
δ 0 > 0.
(Advanced Composition)

Differentially Private Submodular Maximization

Exponential Mechanism. The exponential mechanism (McSherry & Talwar, 2007) is a general primitive for solving discrete optimization problems. Let
q : V × X n → R be a “quality” function measuring
how good a solution v ∈ V is with respect to a dataset
D ∈ X n . We say a quality function q has sensitivity λ if
for all v ∈ V and all neighboring datasets D ∼ D0 , we
have |q(v, D) − q(v, D0 )| ≤ λ.
Proposition 6. Let ε > 0 and let q : V × X n be a quality
function with sensitivity λ. Define the exponential mechanism as the algorithm which selects every v ∈ V with
probability proportional to exp(εq(v, D)/2λ).
• The exponential mechanism provides (ε, 0)differential privacy.
• For every D ∈ X n ,
2λ · ln |V |
,
E[q(v̂, D)] ≥ max q(v, D) −
v∈V
ε
where v̂ is the output of the exponential mechanism on
dataset D.
The privacy guarantee and a “with high probability” utility
guarantee of the exponential mechanism are due to McSherry & Talwar (2007). A simple proof of the utility guarantee in expectation appears in (Bassily et al., 2016).

3. Monotone Submodular Maximization
In this section, we present a variant of the basic greedy algorithm which will enable maximization of monotone submodular functions. This algorithm simply replaces each
greedy selection step with a privacy-preserving selection
algorithm denoted O. The selection function O takes as
input a quality function q : U × X n → R and a dataset
D, as well as privacy parameters ε0 , δ0 , and outputs an element u ∈ U . We begin in the simplest case of monotone
submodular maximization with a cardinality constraint (Algorithm 1). The algorithm for more general constraints appears in Section 3.1.
Algorithm 1 was already studied by Gupta et al. (2010) in
the special case where fD is decomposable, and O is the
exponential mechanism. We generalize their result to the
much broader class of low-sensitivity monotone submodular functions.
Algorithm 1 Diff. Private Greedy (Cardinality) G O
Input: Submodular function fD : 2V → R, dataset D,
cardinality constraint k, privacy parameters ε0 , δ0
Output: Size k subset of V
1. Initialize S0 = ∅
2. For i = 1, . . . , k:
• Define qi : (V \Si−1 )×X n → R via qi (v, D̃) =
fD̃ (Si−1 ∪ {v}) − fD̃ (Si−1 )
• Compute vi ←R O(qi , D; ε0 , δ0 )
• Update Si ← (Si−1 ∪ {vi })
3. Return Sk

Theorem 7. (Gupta et al., 2010) Suppose fD : 2V → R
is λ-decomposable (cf. Definition 2). Let δ > 0 and let
ε0 ≥ 0 be such that ε = 2 · ε0 · (e − 1) ln(3e/δ) ≤ 1. Then
instantiating Algorithm 1 with O = EM and parameter
ε0 > 0 provides (ε, δ)-differential privacy.
Moreover, for every D∈ X n , 
2λk ln |V |
1
OPT −
E [fD (Sk )] ≥ 1 −
e
ε0
where Sk ←R G EM (D).
Unfortunately, the privacy analysis of Theorem 7 makes essential use of the decomposability of fD , and does not directly generalize to arbitrary submodular functions of lowsensitivity. Replacing the privacy analysis of (Gupta et al.,
2010) with the Composition Theorem 5 instead gives
Theorem 8. Suppose fD : 2V → R is monotone and has
sensitivity λ. Then instantiating Algorithm 1 with O = EM
and parameter ε0 > 0 provides (ε = kε0 , δ = 0)differential privacy. It also provides (ε, δ)-differential
prip
vacy for every δ > 0 with ε = kε20 /2 + ε0 · 2k ln(1/δ).
Moreover, for every D∈ X n , 
1
2λk ln |V |
E [fD (Sk )] ≥ 1 −
OPT −
e
ε0
where Sk ←R G EM (D).
3.1. Matroid and p-Extendible System Constraints
We now show how to extend Algorithm 1 to privately maximize monotone submodular functions subject to more general constraints. To start, we review the definition of a pextendible system. Consider a ground set V and a nonempty downward-closed family of subsets I ⊆ 2V (i.e. if
T ∈ I, then S ∈ I for every S ⊆ T ). Such an I is called a
family of independent sets. The pair (V, I) is said to be a pextendible system (Mestre, 2006) if for all S ⊂ T ∈ I, and
v ∈ V such that S ∪{v} ∈ I, there exists a set Z ⊆ (T \S)
such that |Z| ≤ p and (T \ Z) ∪ {v} ∈ I. Let r(I) denote
the size of the largest independent set in I.
The definition of a matroid coincides with that of a 1extendible system (with rank r(I)). For p ≥ 2, the notion of a p-extendible system strictly generalizes that of an
intersection of p matroids. A slight modification of Algorithm 1 gives a unified algorithm for privately maximizing
a monotone submodular function subject to matroid and pextendible system constraints, presented as Algorithm 2.
Theorem 9. Suppose fD : 2V → R is λ-decomposable
(cf. Definition 2). Let δ > 0 and let ε0 ≥ 0 be such that
ε = 2 · ε0 · (e − 1) ln(3e/δ) ≤ 1. Then instantiating Algorithm 2 with O = EM and parameter ε0 > 0 provides
(ε, δ)-differential privacy. Moreover, for every D ∈ X n ,


p
2λr(I) ln |V |
1
E [fD (S)] ≥
· OPT −
p+1
p+1
ε0
where S ←R G EM (D).

Differentially Private Submodular Maximization

Algorithm 2 Differentially Private Greedy (p-system) G O
Input: Submodular function fD : 2V → R, dataset D, pextendible family (V, I), privacy parameters ε0 , δ0
Output: Maximal independent subset of V
1. Initialize S = ∅
2. While S ∈ I is not maximal:
• Define q : (V \ S) × X n → R via q(v, D̃) =
fD̃ (S ∪ {v}) − fD̃ (S)
• Compute vi ←R O(q, D; ε0 , δ0 )
• Update S ← (S ∪ {vi })
3. Return S
Theorem 10. Suppose fD : 2V → R has sensitivity λ.
Then instantiating Algorithm 2 with O = EM and parameter ε0 > 0 provides (ε = r(I)ε0 , δ = 0)-differential privacy. It also provides (ε, δ)-differential
privacy for every
p
δ > 0 with ε = r(I)ε2 /2 + ε · 2r(I) ln(1/δ).
Moreover, for every D ∈ X n ,


p
2λr(I) ln |V |
1
E [fD (S)] ≥
· OPT −
p+1
p+1
ε0
where S ←R G EM (D).

4. Non-Monotone Submodular Maximization
We now consider the problem of privately maximizing an
arbitrary, possibly non-monotone, submodular function under a cardinality constraint. In general, the greedy algorithm presented in Section 3 fails to give any constantfactor approximation. Instead, our algorithm in this section will be based on the “stochastic greedy” algorithm first
studied by Mirzasoleiman et al. (2015). In each round,
the stochastic greedy algorithm first subsamples a random
1
k · ln(1/α) fraction of the ground set for some α > 0,
and then greedily selects the item from this subsample that
maximizes marginal gain. Mirzasoleiman et al. (2015)
showed that for a monotone objective function f , this algorithm provides a (1 − 1/e − α)-approximation to the optimal solution. Their original motivation was to improve the
running time of the greedy algorithm: from O(|V |·k) evaluations of the objective function to linear O(|V | · ln(1/α)).
Unfortunately, the stochastic greedy algorithm does not
provide any approximation guarantee for non-monotone
submodular functions. Buchbinder et al. (2014) instead
proposed a “random greedy” algorithm that, in each iteration, randomly selects one of the k elements with the highest marginal gain. Buchbinder et al. (2014) showed that the
random greedy algorithm achieves a 1/e approximation to
the optimal solution (in expectation), using k|V | function
evaluations. However, it is not clear how to adapt this algorithm to accommodate differential privacy, since its analysis has a brittle dependence on the sampling procedure.
We make two main contributions to the analysis of the

stochastic greedy and random greedy algorithms. First,
we show that running the stochastic greedy algorithm on
an exact k1 fraction of the ground set per iteration still
gives a (0.468)-approximation for monotone objectives,
and moreover, gives a 1e (1 − 1/e)-approximation even for
non-monotone objectives. Note that this algorithm evaluates the objective function on only |V | elements, and still
provides a constant factor approximation guarantee. This
makes our “subsample-greedy” algorithm the fastest algorithm for maximizing a general submodular function subject to a cardinality constraint (albeit with slightly worse
approximation guarantees). Second, we show that the guarantees of this algorithm are robust to using a randomized
greedy selection procedure (e.g. the exponential or large
margin mechanism), and hence it can be adapted to ensure
differential privacy.
We present the subsample-greedy algorithm as Algorithm 3
below. Assume that V is augmented by enough “dummy
elements” to ensure that |V |/k is an integer; each dummy
element u is defined so that fD (S ∪ {u}) = fD (S) for
every set S. We also explicitly account for an additional
set U of k dummy elements, and ensure that at least one
appears in every subsample.
Algorithm 3 Diff. Private “Subsample-Greedy” SG O
Input: Submodular function fD : 2V → R, dataset D,
cardinality constraint k, privacy parameters ε0 , δ0
Output: Size k subset of V
1. Initialize S0 = ∅, dummy elements U =
{u1 , . . . , uk }
2. For i = 1, . . . , k:
• Sample Vi ⊂ V a uniformly random subset of
size |V |/k and ui a random dummy element
• Define qi : (Vi ∪{ui })×X n → R via qi (v, D̃) =
fD̃ (Si−1 ∪ {v}) − fD̃ (Si−1 )
• Compute vi ←R O(qi , D; ε0 , δ0 )
• Update Si ← (Si−1 ∪ {vi })
3. Return Sk with all dummy elements removed
Theorem 11. Suppose fD : 2V → R has sensitivity λ.
Then instantiating Algorithm 3 with O = EM provides
(ε, δ)-differential privacy, and for every D ∈ X n ,


1
1
2λk ln |V |
E [fD (S)] ≥
1−
OPT −
e
e
ε
EM
where S ←R SG (D). Moreover, if fD is monotone, then


2λk ln |V |
E [fD (S)] ≥ 1 − e−(1−1/e) OPT −
ε
2λk ln |V |
≈ 0.468 OPT −
.
ε
The guarantees of Theorem 11 are of interest even without privacy. Letting MAX denote the selection procedure
which simply outputs the true maximizer (equivalently,

Differentially Private Submodular Maximization

which runs the exponential mechanism with ε0 = +∞),
we obtain the following non-private algorithm for maximizing a submodular function fD :
V

Corollary 12. Let fD : 2 → R be any submodular function. Instantiating Algorithm 3 with O = MAX gives


1
1
E [fD (S)] ≥
1−
OPT
e
e
where S ←R SG MAX (D). Moreover, if fD is monotone,
then


E [fD (S)] ≥ 1 − e−(1−1/e) OPT ≈ 0.468 OPT .

5. The Large Margin Mechanism
The accuracy guarantee of the exponential mechanism can
be pessimistic on datasets where q(·, D) exhibits additional structure. For example, suppose that when the elements of V are sorted so that q(v1 , D) ≥ q(v2 , D) ≥
· · · ≥ q(v|V | , D), there exists an ` such that q(v1 , D) 
q(v`+1 , D). Then only the top ` ground set items are relevant to the optimization problem, so running the exponential mechanism on these should maintain differential
privacy, but with error proportional to ln ` rather than to
ln |V |. The large margin mechanism of Chaudhuri et al.
(2014), like the exponential mechanism, generically solves
discrete optimization problems. However, it automatically
leverages this additional margin structure whenever it exists. Asymptotically, the error guarantee of the large margin
mechanism is always at most that of the exponential mechanism, but can be much smaller when the data exhibits a
margin for small `.
Formally, given a quality function q : V × X n → R and
parameters ` ∈ N, γ > 0, a dataset D satisfies the (`, γ)margin condition if q(v`+1 , D) < q(v1 , D) − γ.
For each ` = 1, . . . , |V |, define


4 ln(2`/δ)
g` = λ · 3 +
ε
8λ ln(2/δ) 16λ ln(7`2 /δ)
G` =
+
+ g` .
ε
ε
Recall that the Laplace distribution Lap(b) is specified by
1
the density function 2b
exp(−|x|/b).
Replacing the exponential mechanism with the large margin mechanism gives analogues of our results for monotone
submodular maximization with a cardinality constraint,
monotone submodular maximization over a p-extendible
system, and non-monotone submodular maximization with
a cardinality constraint:
Theorem 13. Suppose fD : 2V → R is monotone
and has sensitivity λ. Then instantiating Algorithm 1
with O = LMM and parameters ε0 , δ0 = 0 provides
(kε0 , kδ0 )-differential privacy. It also provides (ε, δ 0 +

kδ0p
)-differential privacy for every δ 0 > 0 with ε = kε2 /2+
ε · 2k ln(1/δ 0 ).
Moreover, for every D ∈ X n , there exists an event E with
Pr[E] ≥ 1 − β such that


k
X
1
4λ ln `i
E [fD (Sk )|E] ≥ 1 −
OPT −
e
ε0
i=1
where Sk ←R G LMM (D), and D satisfies the (`i , γi )margin condition with respect to every function of the form
qi (v, D) = fD (Ŝi−1 ∪ {v}) − fD (Ŝi−1 ), with γi =
24λ ln(k/β)/ε + G`i .
Theorem 14. Instantiating Algorithm 2 with O = LMM
under all of the conditions of Theorem 13 gives the same
privacy guarantee (replacing k with r(I)) and gives
r(I)
X 4λ ln `i
1
· OPT −
.
E [fD (S)|E] ≥
p+1
ε0
i=1
Theorem 15. Instantiating Algorithm 3 with O = LMM
under all of the conditions of Theorem 13 gives the same
privacy guarantee and gives


k
X
1
1
4λ ln `i
1−
OPT −
E [fD (Sk )|E] ≥
.
e
e
ε0
i=1
Moreover, if fD is monotone, then
k
X
4λ ln `i
E [fD (Sk )|E] ≥ 0.468 OPT −
.
ε0
i=1

6. Experimental Results
In this section we describe two concrete applications of our
mechanisms.
6.1. Location Privacy
We analyze a dataset of 10,000 Uber pickups in Manhattan
in April 2014 (UberDataset). Each individual entry in the
dataset consists of the longitude and latitude coordinates of
the pickup location. We want to use this dataset to select
k public locations as waiting spots for idle Uber drivers,
while also guaranteeing differential privacy for the passengers whose locations appear in this dataset.1 We consider
two different public sets of locations L:
• LP opular is a set of 33 popular locations in Manhattan.
• LGrid is a set of 33 locations spread evenly across
Manhattan in a grid-like manner.
We define a utility function M (i, j) to be the normalized
Manhattan distance between a pickup location i and the
waiting location j. That is, if pickup location i is located at
coordinates (i1 , i2 ) and the waiting location j is located at
|i1 − j1 | + |i2 − j2 |
,
coordinates (j1 , j2 ), then M (i, j) =
m
where m = 0.266 is simply the Manhattan distance between the two furthest spread apart points in Manhattan.
1
Under the assumption that each pickup corresponds to a
unique individual.

Differentially Private Submodular Maximization

(a) LP opular

(e) LP opular :
greedy

(b) LGrid

Non-private

(c) LP opular

(f) LP opular : EM-based greedy

(d) LGrid

(g) LGrid : Non- (h) LGrid : EMprivate greedy
based greedy

Figure 1. (a) and (b) show utility for various cardinalities (k). (c) and (d) fix k = 3 and show utility for various privacy parameters ().
Utility is normalized to be between 0 and 1. (e) - (h) shows a representative top 3 set under various settings.

This normalization ensures that 0 ≤ M (i, j) ≤ 1, for all
i, j. In order to make sure we have a maximization problem, X
we define the following objective function: fD (S) =
n−
min M (i, j), where n = |D| = 10000.
i∈D

j∈S

Observation 16. The function fD is λ-decomposable for
λ = 1 (and hence has sensitivity 1).
This form of objective function is known to be monotone
submodular and so we can use the greedy algorithms studied in this paper. We use  = 0.1 and δ = 2−20 . For our settings of parameters, “basic composition” outperforms “advanced composition,” so the privacy budget of  = 0.1 is
split equally across the k iterations, meaning the mechanism at each iteration uses 0 = k . Our figures plot the
average utility across 100 simulations.
From Figures 1(a) and (b) we see that the results for both
LP opular and LGrid are relatively similar and unsurprising. The non-private greedy algorithm achieves the highest utility, but both the exponential mechanism (EM)-based
greedy and large margin mechanism (LMM)-based greedy
algorithms exhibit comparable utility while preserving a
high level of privacy. Interestingly, we also see that the
utilities of the EM-based and LMM-based algorithms are
almost identical for both LP opular and LGrid . This indicates that our mechanisms are actually selecting good locations, rather than just getting lucky because there are a lot
of good locations to choose from.
Figures 1(c) and (d) show how the utility of the EM-based

and LMM-based algorithms vary with the privacy parameter . We can also think of this as varying the dataset size
for a fixed . We fix k = 3 and take the average of 100
simulations for each value of . We see that even for very
small , our algorithms outperform fully random selection.
As  increases, so does the utility. It is not shown in this
figure, but varying δ has very little effect.
From Figures 1(e) - (h), we see that the both the non-private
and private algorithms select public locations that are relatively close to each other. For example, for the LP opular
set of locations, the Empire State Building is close to the
New York Public Library, the Soho Grand Hotel is close to
NYU, and the Grand Army Plaza is close to the UN Headquarters. As a result, the private mechanisms manage to
achieve comparable utility, while also masking the users’
exact locations.
The theory described in Section 5 suggests that, at least
asymptotically, the large margin mechanism-based algorithm should outperform the exponential mechanism-based
algorithm. However, in our experiments, we find that the
large margin mechanism is generally only able to find a
margin in the first iteration of the greedy algorithm. This is
because the threshold for finding a margin depends only on
, δ, and n and thus it stays the same across all k iterations.
On the other hand, the marginal gain at each iteration drops
very quickly, so the mechanism fails to find a margin and
thus samples from all remaining locations. However, since
the large margin mechanism spends half of its privacy bud-

Differentially Private Submodular Maximization

Diabetes

Insulin

High Blood Pressure

Overweight

Insulin

Blood Transfusion

Overweight

Insulin

Vigorous Exercise

Gender

Non-Private
Greedy

Exponential
Mechanism

Asthma

Taking
Insulin

Vigorous
Exercise

High
Blood
Pressure

(a) Graphical model of Naive Bayes

Large Margin
Mechanism

(b) Expected mutual information

(c) Representative top 3 features

Figure 2. Privately selecting health features, from national health examination surveys, that correlate most with diabetes.

get to try to find a margin, the sampling step gives slightly
worse guarantees than does the plain exponential mechanism, thus giving us the slightly weaker results we see in
the figures.
6.2. Feature Selection Privacy
We analyze a dataset created from a combination of National Health Examination Surveys ranging from 2007 to
2014 (NHANESDataset). There are n = 23, 876 individuals in the dataset with information on whether or not they
have diabetes, along with m = 23 other potentially related
binary health features. Our goal is to privately select k of
these features that provide as much information about the
diabetes class variable as possible.
More specifically, our goal is to maximize the mutual information between Y and XS , where Y is a binary random
variable indicating whether or not an individual has diabetes and XS is a random variable that represents a set S
of k binary health features. Mutual information takes the
form:


XX
p(x, y)
I(Y ; X) =
p(x, y) log2
.
p(x)p(y)
y∈Y x∈X

Under the Naive Bayes assumption, we suppose the
joint distribution on (Y, X1 , . . . , Xk ) takes the form
k
Y
p(y, x1 , . . . , xk ) = p(y)
p(xi | y). Therefore, we can
i=1

easily specify the entire probability distribution by finding
each p(xi | y). We estimate each p(xi | y) by counting
frequencies in the dataset.
Our goal is to choose a size k subset S of the features in
order to maximize fD (S) = I(Y ; XS ). Mutual information (under the Naive Bayes assumption) for feature selection is known to be monotone submodular in S (Krause &
Guestrin, 2005), and thus we can apply the greedy algorithms described in this paper.
Claim 17. In iteration i of the greedy algorithm, the sensitivity of fD (S) is (2i+1)nlog2 (n) .
We run 1,000 simulations with  = 1.0 and δ = 2−20 .
As we can see from Figure 2(b), our private mechanisms

maintain a comparable utility relative to the non-private
algorithm. We also observe an interesting phenomenon
where the expected utility obtained by our mechanism is
not necessarily monotonically increasing with the number
of features selected. This is an artifact of the fact that if
we are selecting k features, then composition requires us to
divide  so that each iteration uses privacy budget k . This
is problematic for this particular application because there
happens to be one feature (insulin administration) that has
much higher value than the rest. Therefore, the reduced
probability of picking this single best feature (as a result of
the lower privacy parameter k ) is not compensated for by
selecting more features.
From Figure 2(c), we see that both the private and nonprivate mechanisms generally select insulin administration
as the top feature. However, while all three of the top features selected by the non-private algorithm are clearly related to diabetes, the non-private mechanisms tend to select
one feature (in our case, gender or having received a blood
transfusion) that may not be quite as relevant.

7. Conclusion
We have presented a general framework for maximizing
submodular functions while guaranteeing differential privacy. Our results demonstrate that simple and flexible
greedy algorithms can preserve privacy while achieving
competitive guarantees for a variety of submodular maximization problems: for all functions under cardinality constraints, as well as for monotone functions under matroid
and p-extendible system constraints. Via our motivation to
identify algorithms that could be made differentially private, we discovered a non-monotone submodular maximization algorithm that achieves guarantees that are novel
even without concern for privacy. Finally, our experiments
show that our algorithms are indeed competitive with their
non-private counterparts.
Acknowledgments. This work was supported by DARPA
Young Faculty Award (D16AP00046), Simons-Berkeley
fellowship, and ERC StG 307036. This work was done in
part while Amin Karbasi and Andreas Krause were visiting
the Simons Institute for the Theory of Computing.

Differentially Private Submodular Maximization

References
Bassily, Raef, Smith, Adam D., and Thakurta, Abhradeep.
Private empirical risk minimization: Efficient algorithms
and tight error bounds. In FOCS, pp. 464–473, 2014.
Bassily, Raef, Nissim, Kobbi, Smith, Adam D., Steinke,
Thomas, Stemmer, Uri, and Ullman, Jonathan. Algorithmic stability for adaptive data analysis. In STOC, pp.
1046–1059, 2016.
Beimel, Amos, Nissim, Kobbi, and Stemmer, Uri. Private
learning and sanitization: Pure vs. approximate differential privacy. Theory of Computing, 12(1):1–61, 2016.
Buchbinder, Niv, Feldman, Moran, Naor, Joseph, and
Schwartz, Roy. Submodular maximization with cardinality constraints. In SODA, pp. 1433–1452, 2014.
Bun, Mark and Steinke, Thomas. Concentrated differential
privacy: Simplifications, extensions, and lower bounds.
In TCC, pp. 635–658, 2016.
Bun, Mark, Nissim, Kobbi, Stemmer, Uri, and Vadhan,
Salil P. Differentially private release and learning of
threshold functions. In FOCS, pp. 634–649, 2015.
Călinescu, Gruia, Chekuri, Chandra, Pál, Martin, and
Vondrák, Jan. Maximizing a monotone submodular
function subject to a matroid constraint. SIAM Journal
on Computing, 2011.
Chaudhuri, Kamalika, Hsu, Daniel J., and Song, Shuang.
The large margin mechanism for differentially private
maximization. In NIPS, pp. 1287–1295, 2014.
Cheraghchi, Mahdi, et al. Submodular functions are noise
stable. In SODA, 2012.
Dwork, Cynthia and Lei, Jing. Differential privacy and robust statistics. In STOC, pp. 371–380, 2009.
Dwork, Cynthia and Roth, Aaron. The algorithmic foundations of differential privacy. Foundations and Trends in
Theoretical Computer Science, 9(3-4):211–407, 2014.
Dwork, Cynthia, McSherry, Frank, Nissim, Kobbi, and
Smith, Adam D. Calibrating noise to sensitivity in private data analysis. In TCC, pp. 265–284, 2006.
Dwork, Cynthia, Rothblum, Guy N., and Vadhan, Salil P.
Boosting and differential privacy. In FOCS, pp. 51–60,
2010.
Feldman, Moran, Naor, Joseph, and Schwartz, Roy. A unified continuous greedy algorithm for submodular maximization. In FOCS, 2011.

Feldman, Moran, Harshaw, Christopher, and Karbasi,
Amin. Greed is good: Near-optimal submodular maximization via greedy optimization. In COLT, 2017.
Fisher, Marshall L., Nemhauser, George L., and Wolsey,
Laurence A. An analysis of approximations for maximizing submodular set functions - II. Mathematical Programming Study, (8), 1978.
Gupta, Anupam, Ligett, Katrina, McSherry, Frank, Roth,
Aaron, and Talwar, Kunal. Differentially private combinatorial optimization. In SODA, pp. 1106–1125, 2010.
Hassidim, Avinatan and Singer, Yaron. Submodular optimization under noise. CoRR, abs/1601.03095, 2016.
URL http://arxiv.org/abs/1601.03095.
Jenkyns, T. A. The efficacy of the “greedy” algorithm.
In South Eastern Conference on Combinatorics, Graph
Theory and Computing, 1976.
Kempe, David, Kleinberg, Jon, and Tardos, Éva. Maximizing the spread of influence through a social network. In
KDD, 2003.
Kirchhoff, Katrin and Bilmes, Jeff. Submodularity for data
selection in statistical machine translation. In EMNLP,
2014.
Krause, A. and Guestrin, C. Near-optimal nonmyopic value
of information in graphical models. In UAI, 2005.
Krause, Andreas and Gomes, Ryan G. Budgeted nonparametric learning from data streams. In ICML, 2010.
Lin, Hui and Bilmes, Jeff. A class of submodular functions
for document summarization. In ACL, 2011.
McSherry, Frank and Talwar, Kunal. Mechanism design
via differential privacy. In FOCS, pp. 94–103, 2007.
Mestre, Julián. Greedy in approximation algorithms. In
ESA, pp. 528–539, 2006.
Mirzasoleiman, Baharan, Badanidiyuru, Ashwinkumar,
Karbasi, Amin, Vondrak, Jan, and Krause, Andreas.
Lazier than lazy greedy. In AAAI, 2015.
Mirzasoleiman, Baharan, Badanidiyuru, Ashwinkumar,
and Karbasi, Amin. Fast constrained submodular maximization: Personalized data summarization. In ICML,
2016a.
Mirzasoleiman, Baharan, Zadimoghaddam, Morteza, and
Karbasi, Amin. Fast distributed submodular cover:
Public-private data summarization. In NIPS, 2016b.
Nemhauser, George L., Wolsey, Laurence A., and Fisher,
Marshall L. An analysis of approximations for maximizing submodular set functions - I. Mathematical Programming, 1978.

Differentially Private Submodular Maximization

NHANESDataset. National health and nutrition examination survey (2007 - 2014). URL https://wwwn.
cdc.gov/nchs/nhanes/default.aspx.
Papadimitriou, Christos H., Schapira, Michael, and Singer,
Yaron. On the hardness of being truthful. In FOCS, pp.
250–259, 2008.
Singla, Adish, Bogunovic, Ilija, Bartók, Gábor, Karbasi,
Amin, and Krause, Andreas. Near-optimally teaching
the crowd to classify. In ICML, 2014.
Sipos, Ruben, Swaminathan, Adith, Shivaswamy, Pannaga,
and Joachims, Thorsten. Temporal corpus summarization using submodular word coverage. In CIKM, 2012.
Song, Shuang, Chaudhuri, Kamalika, and Sarwate,
Anand D. Stochastic gradient descent with differentially
private updates. In GlobalSIP, pp. 245–248, 2013.
UberDataset.
Uber
pickups
in
new
york
city.
URL
https://www.
kaggle.com/fivethirtyeight/
uber-pickups-in-new-york-city.

